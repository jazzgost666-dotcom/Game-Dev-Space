<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Dev Space - Hub de Jogos Indie</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Animated Background -->
  <div class="animated-bg"></div>
  
  <!-- Christmas Lights -->
  <div class="wire"></div>
  <div class="christmas-lights"></div>
  
  <!-- Decorative Elements -->
  <div class="holly"><i class="fas fa-holly-berry"></i></div>
  <div class="candy-cane"><i class="fas fa-candy-cane"></i></div>

  <!-- Header -->
  <header class="header">
    <div class="logo">
      <i class="fas fa-tree logo-icon"></i>
      <span>Game Dev Space</span>
      <i class="fas fa-snowflake" style="font-size:1rem;animation:spin 3s linear infinite;"></i>
    </div>

    <div class="search-container">
      <input type="text" class="search-input" id="searchInput" placeholder="Buscar jogos, desenvolvedores...">
      <button class="search-btn">
        <i class="fas fa-search"></i>
      </button>
    </div>

    <div class="nav-buttons" id="authButtons">
      <button class="nav-btn" onclick="openModal('loginModal')">
        <i class="fas fa-sign-in-alt"></i>
        Entrar
      </button>
      <button class="nav-btn primary" onclick="openModal('registerModal')">
        <i class="fas fa-user-plus"></i>
        Criar Conta
      </button>
    </div>

    <div class="nav-buttons user-menu" id="userSection" style="display:none;">
      <button class="nav-btn primary" onclick="openModal('uploadModal')">
        <i class="fas fa-upload"></i>
        Publicar Jogo
      </button>
      <img src="https://api.dicebear.com/7.x/pixel-art/svg?seed=default" 
           alt="Avatar" class="user-avatar" id="userAvatar" onclick="toggleUserDropdown()">
      <div class="user-dropdown" id="userDropdown">
        <div class="dropdown-item" onclick="openModal('uploadModal')">
          <i class="fas fa-gamepad"></i>
          <span>Meus Jogos</span>
        </div>
        <div class="dropdown-item">
          <i class="fas fa-cog"></i>
          <span>Configuracoes</span>
        </div>
        <div class="dropdown-item" onclick="handleLogout()">
          <i class="fas fa-sign-out-alt"></i>
          <span>Sair</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Featured Section -->
    <section class="featured-section">
      <h2 class="section-title">
        <i class="fas fa-star"></i>
        Jogos em Destaque
        <i class="fas fa-gift" style="color:var(--secondary);"></i>
      </h2>
      <div class="games-grid" id="featuredGrid">
        <div class="loading">
          <div class="spinner"></div>
        </div>
      </div>
    </section>

    <!-- All Games Section -->
    <section class="games-section">
      <h2 class="section-title">
        <i class="fas fa-gamepad"></i>
        Todos os Jogos
        <i class="fas fa-sleigh" style="color:var(--secondary);"></i>
      </h2>
      <div class="games-grid" id="gamesGrid">
        <div class="loading">
          <div class="spinner"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- Login Modal -->
  <div class="modal" id="loginModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-sign-in-alt"></i> Entrar</h2>
        <button class="close-btn" onclick="closeModal('loginModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form onsubmit="handleLogin(event)">
          <div class="form-group">
            <label><i class="fas fa-envelope"></i> Email</label>
            <input type="email" id="loginEmail" required placeholder="seu@email.com">
          </div>
          <div class="form-group">
            <label><i class="fas fa-lock"></i> Senha</label>
            <input type="password" id="loginPassword" required placeholder="Sua senha">
          </div>
          <button type="submit" class="submit-btn" id="loginBtn">
            <i class="fas fa-sign-in-alt"></i>
            Entrar
          </button>
        </form>
        <p style="text-align:center;margin-top:20px;color:rgba(255,255,255,0.6);">
          Nao tem conta? 
          <a href="#" onclick="closeModal('loginModal');openModal('registerModal');" style="color:var(--gold);">Criar conta</a>
        </p>
      </div>
    </div>
  </div>

  <!-- Register Modal -->
  <div class="modal" id="registerModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-user-plus"></i> Criar Conta</h2>
        <button class="close-btn" onclick="closeModal('registerModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form onsubmit="handleRegister(event)">
          <div class="form-group">
            <label><i class="fas fa-user"></i> Nome</label>
            <input type="text" id="registerName" required placeholder="Seu nome">
          </div>
          <div class="form-group">
            <label><i class="fas fa-envelope"></i> Email</label>
            <input type="email" id="registerEmail" required placeholder="seu@email.com">
          </div>
          <div class="form-group">
            <label><i class="fas fa-lock"></i> Senha</label>
            <input type="password" id="registerPassword" required placeholder="Minimo 6 caracteres" minlength="6">
          </div>
          <button type="submit" class="submit-btn" id="registerBtn">
            <i class="fas fa-user-plus"></i>
            Criar Conta
          </button>
        </form>
        <p style="text-align:center;margin-top:20px;color:rgba(255,255,255,0.6);">
          Ja tem conta? 
          <a href="#" onclick="closeModal('registerModal');openModal('loginModal');" style="color:var(--gold);">Entrar</a>
        </p>
      </div>
    </div>
  </div>

  <!-- Upload Game Modal -->
  <div class="modal" id="uploadModal">
    <div class="modal-content" style="max-width:700px;">
      <div class="modal-header">
        <h2 id="uploadModalTitle"><i class="fas fa-gamepad"></i> Publicar Jogo</h2>
        <button class="close-btn" onclick="closeModal('uploadModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form onsubmit="event.preventDefault();handleGameUpload(event);">
          <div class="form-group">
            <label><i class="fas fa-heading"></i> Titulo do Jogo</label>
            <input type="text" id="gameTitle" required placeholder="Nome do seu jogo">
          </div>
          
          <div class="form-group">
            <label><i class="fas fa-align-left"></i> Descricao</label>
            <textarea id="gameDescription" required placeholder="Descreva seu jogo..."></textarea>
          </div>
          
          <div class="form-group">
            <label><i class="fas fa-file-code"></i> Arquivos do Jogo (HTML, CSS, JS)</label>
            <div class="file-upload" id="fileUploadArea" onclick="document.getElementById('gameFiles').click()">
              <i class="fas fa-cloud-upload-alt"></i>
              <p>Arraste os arquivos aqui ou clique para selecionar</p>
              <p style="font-size:0.8rem;margin-top:5px;">HTML, CSS, JS, PNG, JPG, GIF, SVG (max 10MB cada)</p>
            </div>
            <input type="file" id="gameFiles" multiple accept=".html,.css,.js,.png,.jpg,.jpeg,.gif,.svg" 
                   style="display:none;" onchange="handleFileSelect(this)">
            <div class="file-list" id="fileList"></div>
          </div>

          <!-- AI Cover Generator Section -->
          <div class="ai-section">
            <h3 class="ai-title">
              <i class="fas fa-magic"></i>
              Capa do Jogo com IA
            </h3>
            
            <div class="form-group">
              <label><i class="fas fa-image"></i> Imagem Base</label>
              <input type="file" id="coverImageInput" accept="image/*" onchange="handleCoverSelect(this)">
            </div>
            
            <div class="ai-preview" id="aiPreview">
              <i class="fas fa-image" style="font-size:3rem;color:var(--gold);opacity:0.5;"></i>
            </div>
            
            <div class="form-group">
              <label><i class="fas fa-pencil-alt"></i> Descreva as modificacoes desejadas</label>
              <textarea id="aiCoverDescription" placeholder="Ex: Adicione um efeito neon, mude o fundo para espacial..."></textarea>
            </div>
            
            <button type="button" class="ai-generate-btn" onclick="generateCover()">
              <i class="fas fa-wand-magic-sparkles"></i>
              Gerar Capa com IA
            </button>
          </div>

          <button type="submit" class="submit-btn" id="uploadBtn" style="margin-top:20px;">
            <i class="fas fa-rocket"></i>
            Publicar Jogo
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- Game Player Modal -->
  <div class="modal" id="gamePlayerModal">
    <div class="modal-content game-player-modal">
      <div class="modal-header">
        <h2 id="gamePlayerTitle"><i class="fas fa-play"></i> Jogando</h2>
        <div style="display:flex;gap:10px;">
          <button class="fullscreen-btn" onclick="toggleFullscreen()">
            <i class="fas fa-expand"></i>
          </button>
          <button class="close-btn" onclick="closeModal('gamePlayerModal')">&times;</button>
        </div>
      </div>
      <div class="modal-body" style="height:calc(100% - 80px);padding:0;">
        <div class="game-frame-container">
          <iframe id="gameFrame" class="game-frame" sandbox="allow-scripts allow-same-origin"></iframe>
        </div>
        
        <!-- Comments Section -->
        <div class="comments-section" style="padding:20px;">
          <h3 class="comments-title">
            <i class="fas fa-comments"></i>
            Comentarios
          </h3>
          
          <div id="commentsContainer">
            <p style="color:rgba(255,255,255,0.5);text-align:center;">Carregando comentarios...</p>
          </div>
          
          <div class="comment-input-container">
            <input type="text" class="comment-input" id="commentInput" 
                   placeholder="Escreva um comentario...">
            <button class="comment-submit" onclick="submitComment()">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Scripts -->
  <script src="config.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
